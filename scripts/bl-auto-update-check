#!/usr/bin/env bash

# bl-auto-update-check - Manually check for dotfiles updates with interactive prompt
# Runs the auto-update check in interactive mode

set -euo pipefail

# Colors for output
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
RED='\033[0;31m'
BLUE='\033[0;34m'
NC='\033[0m'

# Find auto-update-dotfiles script
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
AUTO_UPDATE_SCRIPT="$SCRIPT_DIR/auto-update-dotfiles"

# Check if auto-update-dotfiles exists
if [[ ! -f $AUTO_UPDATE_SCRIPT ]]; then
  echo -e "${RED}Error:${NC} auto-update-dotfiles script not found at $AUTO_UPDATE_SCRIPT"
  exit 1
fi

# Print header
echo -e "${BLUE}[Auto-Update Check]${NC}"
echo "Checking for dotfiles updates..."
echo ""

# Run auto-update-dotfiles in check mode
# The --check-on-start flag runs it interactively (not in background)
exec "$AUTO_UPDATE_SCRIPT" --check-on-start
