# 새로운 테스트 구조

## 📁 디렉토리 구조

```
tests-new/
├── core/                    # 핵심 기능 테스트 (Unit + 기본 Integration)
├── integration/             # 복합 시스템 통합 테스트
├── e2e/                     # 종단간 워크플로우 테스트
├── performance/             # 성능 및 벤치마크 테스트
├── lib/                     # 공통 테스트 라이브러리
└── default.nix             # 통합된 테스트 진입점
```

## 🎯 통합 목표

- **133개 → 35개** 파일로 축소 (74% 감소)
- **실행 시간**: ~10분 → ~5분
- **코드 중복률**: 40% → 10%

## 📋 통합 현황

### 완료
- [ ] Build-switch 통합 (19개 → 3개)
- [ ] Claude CLI 통합 (6개 → 2개)
- [ ] 공통 라이브러리 통합

### 대기 중
- [ ] Homebrew 통합 (6개 → 2개)
- [ ] User Resolution 통합 (5개 → 1개)
- [ ] ZSH 통합 (4개 → 2개)

## 🔧 TDD 통합 원칙

1. **Red Phase**: 통합 대상 파일들의 모든 테스트 케이스를 실패하는 통합 테스트로 생성
2. **Green Phase**: 최소한의 구현으로 모든 테스트 통과시키기
3. **Refactor Phase**: 코드 중복 제거 및 품질 개선

이 과정을 통해 기존 테스트의 검증 로직을 100% 보존하면서 구조를 개선합니다.
